<?xml version="1.0" encoding="ISO-8859-1"?>
<configuration>

  <component>
    <key>org.exoplatform.services.database.HibernateService</key>
    <type>org.exoplatform.services.database.impl.HibernateServiceImpl</type>
    <init-params>
      <properties-param>
        <name>hibernate.properties</name>
        <description>Default Hibernate Service</description>
        <property name="hibernate.show_sql" value="false" />
        <property name="hibernate.cglib.use_reflection_optimizer" value="true" />
        <property name="hibernate.connection.url" value="jdbc:hsqldb:mem:temp/data/portal" />
        <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver" />
        <property name="hibernate.connection.autocommit" value="true" />
        <property name="hibernate.connection.username" value="sa" />
        <property name="hibernate.connection.password" value="" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect" />
        <property name="hibernate.c3p0.min_size" value="5" />
        <property name="hibernate.c3p0.max_size" value="20" />
        <property name="hibernate.c3p0.timeout" value="1800" />
        <property name="hibernate.c3p0.max_statements" value="50" />
      </properties-param>
    </init-params>
  </component>

  <component>
    <type>org.exoplatform.services.portletcontainer.PortletContainerConf</type>
    <init-params>
      <object-param>
        <name>conf</name>
        <object type="org.exoplatform.services.portletcontainer.PortletContainer">
          <field name="global">
            <object type="org.exoplatform.services.portletcontainer.config.Global">
              <field name="name">
                <string>ExoPortletContainer</string>
              </field>
              <field name="description">
                <string>A JSR 168/286 compliant portlet container</string>
              </field>
              <field name="majorVersion">
                <int>2</int>
              </field>
              <field name="minorVersion">
                <int>0</int>
              </field>
              <field name="hookPortletExceptions">
                <string>false</string>
              </field>
            </object>
          </field>
          <field name="bundle">
            <object type="org.exoplatform.services.portletcontainer.config.DelegatedBundle">
              <field name="enable">
                <string>true</string>
              </field>
            </object>
          </field>
          <field name="cache">
            <object type="org.exoplatform.services.portletcontainer.config.Cache">
              <field name="enable">
                <string>true</string>
              </field>
            </object>
          </field>
          <field name="supportedContent">
            <collection type="java.util.ArrayList">
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>text/html</string>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>text/wml</string>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>audio/x-mpeg</string>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>image/bmp</string>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>image/jpg</string>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>image/jpeg</string>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>image/gif</string>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.SupportedContent">
                  <field name="name">
                    <string>application/octet-stream</string>
                  </field>
                </object>
              </value>
            </collection>
          </field>
          <field name="customMode">
            <collection type="java.util.ArrayList">
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomMode">
                  <field name="name">
                    <string>config</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>to let admin config portlets</string>
                          </field>
                        </object>
                      </value>
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>fr</string>
                          </field>
                          <field name="description">
                            <string>permet de configurer les portlets</string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomMode">
                  <field name="name">
                    <string>wsrp</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>to admin wsrp portlet</string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomMode">
                  <field name="name">
                    <string>monitor</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>to monitor a portlet</string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomMode">
                  <field name="name">
                    <string>about</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>
                              The about portlet mode should be used by the portlet to display information on the portlets purpose, origin, version
                              etc.
                            </string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomMode">
                  <field name="name">
                    <string>edit_defaults</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>
                              The edit_defaults portlet mode signifies that the portlet should render a screen to set the default values for the
                              modifiable preferences that are typically changed in the EDIT screen. Calling this mode requires that the user must have
                              administrator rights. Therefore, only the portal can create links for changing the portlet mode into edit_defaults.
                            </string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomMode">
                  <field name="name">
                    <string>print</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>The printportlet mode signifies that the portlet should render a view that can be printed.</string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomMode">
                  <field name="name">
                    <string>preview</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>
                              The preview portlet mode should be used by the portlet to render output without the need of having back-end connections
                              or user specific data available. It may be used at page design time and in portlet development tools.
                            </string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
            </collection>
          </field>
          <field name="customWindowState">
            <collection type="java.util.ArrayList">
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomWindowState">
                  <field name="name">
                    <string>half-page</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>portlet takes half of the page</string>
                          </field>
                        </object>
                      </value>
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>fr</string>
                          </field>
                          <field name="description">
                            <string>portlet sure une demi page</string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.CustomWindowState">
                  <field name="name">
                    <string>max-per-column</string>
                  </field>
                  <field name="description">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.portletcontainer.config.Description">
                          <field name="lang">
                            <string>en</string>
                          </field>
                          <field name="description">
                            <string>portlet the whole column</string>
                          </field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </value>
            </collection>
          </field>
          <field name="properties">
            <collection type="java.util.ArrayList">
              <value>
                <object type="org.exoplatform.services.portletcontainer.config.Properties">
                  <field name="description">
                    <string>a testing property</string>
                  </field>
                  <field name="name">
                    <string>test</string>
                  </field>
                  <field name="value">
                    <string>test_value</string>
                  </field>
                </object>
              </value>
            </collection>
          </field>
        </object>
      </object-param>
    </init-params>
  </component>

  <component>
    <key>org.exoplatform.services.portletcontainer.plugins.pc.PortletApplicationsHolder</key>
    <type>org.exoplatform.services.portletcontainer.plugins.pc.PortletApplicationsHolder</type>
  </component>

  <component>
    <key>org.exoplatform.services.portletcontainer.monitor.PortletContainerMonitor</key>
    <jmx-name>monitor:type=PortletContainerMonitor</jmx-name>
    <type>org.exoplatform.services.portletcontainer.plugins.pc.monitor.PortletContainerMonitorImpl</type>
  </component>

  <component>
    <key>org.exoplatform.services.portletcontainer.PortletApplicationRegister</key>
    <type>org.exoplatform.services.portletcontainer.plugins.pc.PortletApplicationRegisterImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.portletcontainer.plugins.pc.aop.PortletCommandChain</type>
    <component-plugins>
      <component-plugin>
        <name>portlet.monitor.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.plugins.pc.aop.PortletMonitorCommand</type>
        <description>this command log the render and process action of each portlet</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.security.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.plugins.pc.aop.PortletSecurityCommand</type>
        <description>this command check the security before render and process action</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.filter.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.plugins.pc.aop.PortletFilterCommand</type>
        <description>this command runs portlet filter chain for current portlet</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.cache.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.plugins.pc.aop.PortletCacheCommand</type>
        <description>this command retrieve cache in the render method and invalidate cache in the process action of each portlet</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.content.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.plugins.pc.aop.PortletContentCommand</type>
        <description>this command retrieve cache in the render method and invalidate cache in the process action of each portlet</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.method.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.plugins.pc.aop.PortletMethodCommand</type>
        <description>this command execute the method process action and render of the portlet</description>
      </component-plugin>
    </component-plugins>
  </component>
  
  <external-component-plugins>
    <target-component>org.exoplatform.services.xml.resolving.impl.XMLResolvingServiceImpl</target-component>
    <component-plugin>
      <name>add.resolving.table</name>
      <set-method>addPlugin</set-method>
      <type>org.exoplatform.services.xml.resolving.impl.AddXMLResolvingContextPlugin</type>
      <init-params>
        <properties-param>
          <name>portlet-app_1_0.xsd</name>
          <property name="uri" value="portlet-app_1_0.xsd" />
          <property name="systemId" value="http://java.sun.com/xml/ns/portlet/portlet-app_1_0.xsd" />
        </properties-param>
        <properties-param>
          <name>portlet-app_2_0.xsd</name>
          <property name="uri" value="portlet-app_2_0.xsd" />
          <property name="systemId" value="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd" />
        </properties-param>
      </init-params>
    </component-plugin>
  </external-component-plugins>
  
  <remove-configuration>org.exoplatform.services.transaction.ExoTransactionService</remove-configuration>
  <remove-configuration>org.exoplatform.services.scheduler.JobSchedulerService</remove-configuration>
</configuration>
