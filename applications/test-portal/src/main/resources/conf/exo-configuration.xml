<?xml version="1.0" encoding="ISO-8859-1"?>

<configuration>
  <component>
    <key>org.exoplatform.services.log.LogConfigurationInitializer</key>
    <type>org.exoplatform.services.log.LogConfigurationInitializer</type>
    <init-params>
      <value-param>
        <name>logger</name>
        <value>org.exoplatform.services.log.impl.BufferedSimpleLog</value>
      </value-param>
      <value-param>
        <name>configurator</name>
        <value>org.exoplatform.services.log.impl.SimpleLogConfigurator</value>
      </value-param>
      <properties-param>
        <name>properties</name>
        <description>SimpleLog properties</description>
        <property name="org.apache.commons.logging.log.org.exoplatform.services.portletcontainer" value="debug"/>
        <property name="org.apache.commons.logging.simplelog.defaultlog" value="info"/>
      </properties-param>
    </init-params>
  </component>
  <component>
    <key>org.exoplatform.services.log.LogService</key>
    <type>org.exoplatform.services.log.impl.LogServiceImpl</type>
    <!--Valid value: FATAL, ERROR, WARN, INFO, DEBUG, TRACE-->
	  <init-params>
	   <properties-param>
	     <name>log.level.config</name>
	     <property name="org.exoplatform.services.log" value="INFO"/>
	   </properties-param>
	  </init-params>
  </component>
  <component>
    <key>org.exoplatform.services.cache.CacheService</key>
    <type>org.exoplatform.services.cache.impl.CacheServiceImpl</type>
    <init-params>
      <object-param>
        <name>cache.config.default</name>
        <description>The default cache configuration</description>
        <object type="org.exoplatform.services.cache.ExoCacheConfig">
          <field  name="name"><string>default</string></field>
          <field  name="maxSize"><int>100</int></field>
          <field  name="liveTime"><long>300</long></field>
          <field  name="distributed"><boolean>false</boolean></field>
        </object>
      </object-param>
    </init-params>
  </component>
  <component>
    <key>org.exoplatform.services.database.HibernateService</key>
    <type>org.exoplatform.services.database.impl.HibernateServiceImpl</type>
    <init-params>
      <properties-param>
        <name>hibernate.properties</name>
        <description>Default Hibernate Service</description>
        <property name="hibernate.show_sql" value="false"/>
        <property name="hibernate.cglib.use_reflection_optimizer" value="true"/>
        <property name="hibernate.connection.url" value="jdbc:hsqldb:mem:temp/data/portal"/>
        <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
        <property name="hibernate.connection.autocommit" value="true"/>
        <property name="hibernate.connection.username" value="sa"/>
        <property name="hibernate.connection.password" value=""/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
        <property name="hibernate.c3p0.min_size" value="5"/>
        <property name="hibernate.c3p0.max_size" value="20"/>
        <property name="hibernate.c3p0.timeout" value="1800"/>
        <property name="hibernate.c3p0.max_statements" value="50"/>
      </properties-param>
    </init-params>
  </component>
  <component>
    <key>org.exoplatform.services.organization.OrganizationService</key>
    <type>org.exoplatform.services.organization.hibernate.OrganizationServiceImpl</type>
  </component>
  <component>
    <type>org.exoplatform.services.xml.resolving.impl.simple.SimpleDirResolvingServiceImpl</type>
  </component>
  <component>
    <key>org.exoplatform.services.portletcontainer.PortletContainerService</key>
    <type>org.exoplatform.services.portletcontainer.impl.PortletContainerServiceImpl</type>
  </component>
  <component>
    <type>org.exoplatform.services.portletcontainer.impl.PortletContainerDispatcher</type>
  </component>
  <!-- ============================================================================= -->
  <!--    P O R T L E T  C O N T A I N E R    C O N F I G U R A T I O N              -->
  <!-- ============================================================================= -->
  <component>
    <type>org.exoplatform.services.portletcontainer.impl.PortletApplicationHandler</type>
  </component>
  <component>
    <key>javax.portlet.PortalContext</key>
    <type>org.exoplatform.services.portletcontainer.impl.portletAPIImp.PortalContextImp</type>
  </component>
  <component>
    <key>org.exoplatform.services.portletcontainer.impl.portletAPIImp.persistenceImp.PersistenceManager</key>
    <type>org.exoplatform.services.portletcontainer.impl.portletAPIImp.persistenceImp.DefaultPersistenceManager</type>
  </component>
  <component>
    <type>org.exoplatform.services.portletcontainer.impl.portletAPIImp.bundle.ResourceBundleManager</type>
  </component>
  <component>
    <type>org.exoplatform.services.portletcontainer.impl.ResourceBundleDelegateImpl</type>
  </component>
  <component>
    <key>org.exoplatform.services.resources.LocaleConfigService</key>
    <type>org.exoplatform.services.resources.impl.LocaleConfigServiceImpl</type>
      <init-params>
        <value-param>
          <name>locale.config.file</name>
          <value>locales-config.xml</value>
        </value-param>
      </init-params>
  </component>
  <component>
    <key>org.exoplatform.services.resources.ResourceBundleService</key>
    <type>org.exoplatform.services.portletcontainer.impl.ResourceBundleServiceImpl</type>
    <init-params>
      <values-param>
        <name>classpath.resources</name>
        <description>The resources  that start with the following package name should be load from file system</description>
        <value>locale.portlet</value>
      </values-param>

      <values-param>
        <name>init.resources</name>
        <description>Store the following resources into the db for  the first launch </description>
        <value>locale.test.resources.test</value>
      </values-param>

      <values-param>
        <name>portal.resource.names</name>
        <description>The properties files of  the portal ,  those file will be merged
          into one ResoruceBundle properties </description>
        <value>local.portal.portal</value>
        <value>local.portal.custom</value>
        <value></value>
      </values-param>
    </init-params>
  </component>
  <component>
    <type>org.exoplatform.services.portletcontainer.impl.PortletPreferencesPersisterImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.portletcontainer.impl.PortletContainerConf</type>
      <init-params>
        <object-param>
          <name>conf</name>
          <object type="org.exoplatform.services.portletcontainer.impl.config.PortletContainer">
            <field name="global">
              <object type="org.exoplatform.services.portletcontainer.impl.config.Global">
                <field name="name"><string>ExoPortletContainer</string></field>
                <field name="description"><string>A JSR 168 compliant portlet container</string></field>
                <field name="majorVersion"><int>1</int></field>
                <field name="minorVersion"><int>0</int></field>
              </object>
            </field>
            <field name="sharedSession">
              <object type="org.exoplatform.services.portletcontainer.impl.config.SharedSession">
                <field name="enable"><string>false</string></field>
              </object>
            </field>
            <field name="bundle">
              <object type="org.exoplatform.services.portletcontainer.impl.config.DelegatedBundle">
                <field name="enable"><string>true</string></field>
              </object>
            </field>
            <!-- field name="objectPool">
              <object type="org.exoplatform.services.portletcontainer.impl.config.ObjectPool">
                <field name="instancesInPool"><int>200</int></field>
              </object>
            </field -->
            <field name="cache">
              <object type="org.exoplatform.services.portletcontainer.impl.config.Cache">
                <field name="enable"><string>true</string></field>
              </object>
            </field>
            <field name="supportedContent">
              <collection type="java.util.ArrayList">
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.SupportedContent">
                    <field name="name"><string>text/html</string></field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.SupportedContent">
                    <field name="name"><string>text/wml</string></field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.SupportedContent">
                    <field name="name"><string>audio/x-mpeg</string></field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.SupportedContent">
                    <field name="name"><string>image/bmp</string></field>
                  </object>
                </value>
              </collection>
            </field>
            <field name="customMode">
              <collection type="java.util.ArrayList">
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomMode">
                    <field name="name"><string>config</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>to let admin config portlets</string></field>
                          </object>
                        </value>
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>fr</string></field>
                            <field name="description"><string>permet de configurer les portlets</string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomMode">
                    <field name="name"><string>wsrp</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>to admin wsrp portlet</string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomMode">
                    <field name="name"><string>monitor</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>to monitor a portlet</string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomMode">
                    <field name="name"><string>about</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>The about portlet mode should be used by the portlet to display information on the portlets purpose, origin, version etc.</string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomMode">
                    <field name="name"><string>edit_defaults</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>
      The edit_defaults portlet mode signifies that the portlet should render a screen to set
      the default values for the modifiable preferences that are typically changed in the EDIT
      screen. Calling this mode requires that the user must have administrator rights. Therefore,
      only the portal can create links for changing the portlet mode into edit_defaults.
                            </string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomMode">
                    <field name="name"><string>print</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>
      The printportlet mode signifies that the portlet should render a view that can be printed.
                            </string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomMode">
                    <field name="name"><string>preview</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>
      The preview portlet mode should be used by the portlet to render output without the need
      of having back-end connections or user specific data available. It may be used at page
      design time and in portlet development tools.
                            </string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
              </collection>
            </field>
            <field name="customWindowState">
              <collection type="java.util.ArrayList">
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomWindowState">
                    <field name="name"><string>half-page</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>portlet takes half of the page</string></field>
                          </object>
                        </value>
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>fr</string></field>
                            <field name="description"><string>portlet sure une demi page</string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.CustomWindowState">
                    <field name="name"><string>max-per-column</string></field>
                    <field name="description">
                      <collection type="java.util.ArrayList">
                        <value>
                          <object type="org.exoplatform.services.portletcontainer.impl.config.Description">
                            <field name="lang"><string>en</string></field>
                            <field name="description"><string>portlet the whole column</string></field>
                          </object>
                        </value>
                      </collection>
                    </field>
                  </object>
                </value>
              </collection>
            </field>
            <field name="properties">
              <collection type="java.util.ArrayList">
                <value>
                  <object type="org.exoplatform.services.portletcontainer.impl.config.Properties">
                    <field name="description"><string>a testing property</string></field>
                    <field name="name"><string>test</string></field>
                    <field name="value"><string>test_value</string></field>
                  </object>
                </value>
              </collection>
            </field>
          </object>
        </object-param>
        <!-- value-param>
          <name>conf-path</name>
          <value>jar:/conf/portal/portlet-container.xml</value>
        </value-param -->
      </init-params>
  </component>

  <component>
    <key>org.exoplatform.services.portletcontainer.impl.PortletApplicationsHolder</key>
    <type>org.exoplatform.services.portletcontainer.impl.PortletApplicationsHolder</type>
  </component>

  <component>
    <key>org.exoplatform.services.portletcontainer.monitor.PortletContainerMonitor</key>
    <jmx-name>monitor:type=PortletContainerMonitor</jmx-name>
    <type>org.exoplatform.services.portletcontainer.impl.monitor.PortletContainerMonitorImpl</type>
  </component>

  <component>
    <key>org.exoplatform.services.portletcontainer.PortletApplicationRegister</key>
    <type>org.exoplatform.services.portletcontainer.impl.PortletApplicationRegisterImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.xml.transform.impl.html.TidyTransformerServiceImpl</type>
  </component>
  <component>
    <type>org.exoplatform.services.xml.transform.impl.trax.TRAXTransformerServiceImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.portletcontainer.impl.aop.PortletCommandChain</type>
    <component-plugins>
      <component-plugin>
        <name>portlet.monitor.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.impl.aop.PortletMonitorCommand</type>
        <description>this command log  the render  and process action of  each portlet</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.security.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.impl.aop.PortletSecurityCommand</type>
        <description>this command check the security  before render  and process action</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.cache.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.impl.aop.PortletCacheCommand</type>
        <description>this command retrieve cache in  the render method  and invalidate cache
          in the process action of  each portlet</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.content.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.impl.aop.PortletContentCommand</type>
        <description>this command retrieve cache in  the render method  and invalidate cache
          in the process action of  each portlet</description>
      </component-plugin>
      <component-plugin>
        <name>portlet.method.filter</name>
        <set-method>addCommand</set-method>
        <type>org.exoplatform.services.portletcontainer.impl.aop.PortletMethodCommand</type>
        <description>this command execute the method process action and render  of the portlet</description>
      </component-plugin>
    </component-plugins>
  </component>

  <!-- WSRP components -->

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.ServiceDescriptionInterfaceImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.RegistrationOperationsInterfaceImp</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.MarkupOperationsInterfaceImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.PortletManagementOperationsInterfaceImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.JSR168ContainerProxyImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.PersistentStateManagerImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.TransientStateManagerImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.wsdl.WSRPServiceLocator</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.PortletRegistryImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.PortletDriverRegistryImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.ProducerRegistryImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.UserRegistryImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.URLGeneratorImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.URLRewriterImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.ConsumerEnvironmentImpl</type>
  </component>
  <component>
    <type>org.exoplatform.services.wsrp.consumer.impl.URLTemplateComposerImpl</type>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.WSRPConfiguration</type>
    <init-params>
      <values-param>
        <name>exclude-list</name>
        <value>portlets/HelloWorld</value>
        <value>portlets/BridgePortlet</value>
      </values-param>
      <properties-param>
       <name>wsrp-conf</name>
       <property name="wsrp.requires.registration" value="true"/>
       <property name="wsrp.has.user.specific.state" value="true"/>
       <property name="wsrp.does.url.template.processing" value="true"/>
       <property name="wsrp.templates.stored.in.session" value="false"/>
       <property name="wsrp.user.context.stored.in.session" value="false"/>
       <property name="wsrp.uses.method.get" value="false "/>
       <property name="wsrp.perform.blocking.interaction.optimized" value="false"/>
       <property name="wsrp.save.registration.state.on.consumer" value="false"/>
       <property name="wsrp.save.portlet.state.on.consumer" value="false"/>
      </properties-param>
    </init-params>
  </component>

  <component>
    <type>org.exoplatform.services.wsrp.producer.impl.WSRPStarter</type>
    <init-params>
      <value-param>
        <name>base</name>
        <value>http://localhost:8080/</value>
      </value-param>
      <value-param>
        <name>path</name>
        <value>wsrp/services</value>
      </value-param>
      <value-param>
        <name>retries</name>
        <value>10</value>
      </value-param>
      <value-param>
        <name>retry_after</name>
        <value>30</value>
      </value-param>
    </init-params>
  </component>

  <!--startof repository configuration-->
  <!--from exo-jcr\...\conf\standalone\test-configuration.xml-->
  <!--
  <component>
    <key>org.exoplatform.services.idgenerator.IDGeneratorService</key>
    <type>org.exoplatform.services.idgenerator.impl.IDGeneratorServiceImpl</type>
  </component>

  <component>
    <key>org.exoplatform.services.transaction.XAGlobalRegistry</key>
    <type>org.exoplatform.services.transaction.XAGlobalRegistry</type>
  </component>

  <component>
    <key>org.exoplatform.services.naming.InitialContextInitializer</key>
    <type>org.exoplatform.services.naming.InitialContextInitializer</type>
    <component-plugins>
      <component-plugin>
        <name>bind.datasource</name>
        <set-method>addPlugin</set-method>
        <type>org.exoplatform.services.naming.BindReferencePlugin</type>
        <init-params>
          <value-param>
            <name>bind-name</name>
            <value>jdbcjcr</value>
          </value-param>
          <value-param>
            <name>class-name</name>
            <value>javax.sql.DataSource</value>
          </value-param>
          <value-param>
            <name>factory</name>
            <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
          </value-param>
      <properties-param>
            <name>ref-addresses</name>
            <description>ref-addresses</description>
            <property name="driverClassName" value="org.postgresql.Driver"/>
            <property name="url" value="jdbc:postgresql://exoua.dnsalias.net/portal"/>
            <property name="username" value="exoadmin"/>
            <property name="password" value="exo12321"/>
            <property name="maxActive" value="50"/>
            <property name="maxIdle" value="5"/>
            <property name="initialSize" value="5"/>
          </properties-param>
        </init-params>
      </component-plugin>
      <component-plugin>
        <name>bind.datasource</name>
        <set-method>addPlugin</set-method>
        <type>org.exoplatform.services.naming.BindReferencePlugin</type>
        <init-params>
          <value-param>
            <name>bind-name</name>
            <value>jdbcjcr1</value>
          </value-param>
          <value-param>
            <name>class-name</name>
            <value>javax.sql.DataSource</value>
          </value-param>
          <value-param>
            <name>factory</name>
            <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
          </value-param>
      <properties-param>
            <name>ref-addresses</name>
            <description>ref-addresses</description>
            <property name="driverClassName" value="org.postgresql.Driver"/>
            <property name="url" value="jdbc:postgresql://exoua.dnsalias.net/jcr"/>
            <property name="username" value="exoadmin"/>
            <property name="password" value="exo12321"/>
            <property name="maxActive" value="50"/>
            <property name="maxIdle" value="5"/>
            <property name="initialSize" value="5"/>
          </properties-param>
        </init-params>
      </component-plugin>
      <component-plugin>
        <name>bind.datasource</name>
        <set-method>addPlugin</set-method>
        <type>org.exoplatform.services.naming.BindReferencePlugin</type>
        <init-params>
          <value-param>
            <name>bind-name</name>
            <value>jdbcjcr2</value>
          </value-param>
          <value-param>
            <name>class-name</name>
            <value>javax.sql.DataSource</value>
          </value-param>
          <value-param>
            <name>factory</name>
            <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
          </value-param>
      <properties-param>
            <name>ref-addresses</name>
            <description>ref-addresses</description>
            <property name="driverClassName" value="org.postgresql.Driver"/>
            <property name="url" value="jdbc:postgresql://exoua.dnsalias.net/jcr2"/>
            <property name="username" value="exoadmin"/>
            <property name="password" value="exo12321"/>
            <property name="maxActive" value="50"/>
            <property name="maxIdle" value="5"/>
            <property name="initialSize" value="5"/>
          </properties-param>
        </init-params>
     </component-plugin>
    </component-plugins>
    <init-params>
      <value-param>
        <name>default-context-factory</name>
        <value>org.exoplatform.services.naming.SimpleContextFactory</value>
      </value-param>
    </init-params>
  </component>

  <component>
    <key>org.exoplatform.services.database.jdbc.DBSchemaCreator</key>
    <type>org.exoplatform.services.database.jdbc.DBSchemaCreator</type>
    <component-plugins>
      <component-plugin>
          <name>jcr.dbschema</name>
          <set-method>addPlugin</set-method>
          <type>org.exoplatform.services.database.jdbc.CreateDBSchemaPlugin</type>
          <init-params>
            <value-param>
              <name>data-source</name>
              <value>jdbcjcr</value>
            </value-param>
            <value-param>
              <name>script-file</name>
              <value>conf/storage/jcr-mjdbc.sql</value>
            </value-param>
          </init-params>
      </component-plugin>
      <component-plugin>
          <name>jcr.dbschema</name>
          <set-method>addPlugin</set-method>
          <type>org.exoplatform.services.database.jdbc.CreateDBSchemaPlugin</type>
          <init-params>
            <value-param>
              <name>data-source</name>
              <value>jdbcjcr1</value>
            </value-param>
            <value-param>
              <name>script-file</name>
              <value>conf/storage/jcr-mjdbc.sql</value>
            </value-param>
          </init-params>
      </component-plugin>
      <component-plugin>
          <name>jcr.dbschema</name>
          <set-method>addPlugin</set-method>
          <type>org.exoplatform.services.database.jdbc.CreateDBSchemaPlugin</type>
          <init-params>
            <value-param>
              <name>data-source</name>
              <value>jdbcjcr2</value>
            </value-param>
            <value-param>
              <name>script-file</name>
              <value>conf/storage/jcr-mjdbc.sql</value>
            </value-param>
          </init-params>
      </component-plugin>
    </component-plugins>
  </component>

  <component>
    <key>org.exoplatform.services.jcr.RepositoryService</key>
    <type>org.exoplatform.services.jcr.impl.RepositoryServiceImpl</type>
    <component-plugins>
      <component-plugin>
          <name>add.namespaces</name>
          <set-method>addPlugin</set-method>
          <type>org.exoplatform.services.jcr.impl.AddNamespacesPlugin</type>
          <init-params>
            <properties-param>
              <name>namespaces</name>
              <property name="test" value="http://www.apache.org/jackrabbit/test"/>
            </properties-param>
          </init-params>
      </component-plugin>
    <component-plugin>
      <name>add.nodeType</name>
      <set-method>addPlugin</set-method>
      <type>org.exoplatform.services.jcr.impl.AddNodeTypePlugin</type>
      <init-params>
        <values-param>
          <name>autoCreatedInNewRepository</name>
          <description>Node types configuration file</description>
          <value>jar:/conf/test/nodetypes-tck.xml</value>
        </values-param>
      </init-params>
    </component-plugin>
    </component-plugins>
  </component>

  <component>
    <key>org.exoplatform.services.jcr.config.RepositoryServiceConfiguration</key>
    <type>org.exoplatform.services.jcr.impl.config.RepositoryServiceConfigurationImpl</type>
    <init-params>
      <value-param>
        <name>conf-path</name>
        <description>JCR configuration file</description>
        <value>test-jcr-config.xml</value>
      </value-param>
    </init-params>
  </component>

  <component>
    <type>org.exoplatform.services.jcr.impl.mock.DummyOrganizationService</type>
  </component>

  <component>
          <key>org.exoplatform.services.security.SecurityService</key>
          <type>org.exoplatform.services.security.impl.SecurityServiceImpl</type>
    <init-params>
      <value-param>
        <name>security.authentication</name>
        <value>standalone</value>
      </value-param>
    </init-params>
  </component>

  <component>
    <key>org.exoplatform.services.document.DocumentReaderService</key>
    <type>org.exoplatform.services.document.impl.DocumentReaderServiceImpl</type>
    <component-plugins>
      <component-plugin>
        <name>pdf.document.reader</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.PDFDocumentReader</type>
        <description>to read  the pdf inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.types</name>
            <description>description</description>
            <value>application/pdf</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>document.readerMSWord</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.MSWordDocumentReader</type>
        <description>to read  the ms word inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesMSWord</name>
            <description>description</description>
            <value>application/msword</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>document.readerMSExcel</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.MSExcelDocumentReader</type>
        <description>to read  the ms excel inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesMSExcel</name>
            <description>description</description>
            <value>application/excel</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>PPTdocument.reader</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.PPTDocumentReader</type>
        <description>to read  the ms ppt inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesPPT</name>
            <description>description</description>
            <value>application/ppt</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>TPdocument.reader</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.TextPlainDocumentReader</type>
        <description>to read  the plain text inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesTextPlain</name>
            <description>description</description>
            <value>text/plain</value>
          </values-param>
        </init-params>
      </component-plugin>

    </component-plugins>
  </component>

  <external-component-plugins>
    <target-component>org.exoplatform.services.remote.group.CommunicationService</target-component>
    <component-plugin>
      <name>synchronize.cache.handler</name>
      <set-method>addPlugin</set-method>
      <type>org.exoplatform.services.cache.impl.SynchronizeCacheMessageHandler</type>
      <description>synchronize the cache</description>
    </component-plugin>
  </external-component-plugins>
  -->
  <!--end of repository configuration-->
  <!--portlet conf-->
  <external-component-plugins>
    <target-component>org.exoplatform.services.database.HibernateService</target-component>
    <component-plugin>
      <name>add.hibernate.mapping</name>
      <set-method>addPlugin</set-method>
      <type>org.exoplatform.services.database.impl.AddHibernateMappingPlugin</type>
      <init-params>
        <values-param>
          <name>hibernate.mapping</name>
          <value>org/exoplatform/services/wsrp/consumer/impl/ProducerData.hbm.xml</value>
          <value>org/exoplatform/services/wsrp/producer/impl/StateData.hbm.xml</value>
          <value>org/exoplatform/services/organization/impl/UserImpl.hbm.xml</value>
          <value>org/exoplatform/services/organization/impl/MembershipImpl.hbm.xml</value>
          <value>org/exoplatform/services/organization/impl/GroupImpl.hbm.xml</value>
          <value>org/exoplatform/services/organization/impl/MembershipTypeImpl.hbm.xml</value>
          <value>org/exoplatform/services/organization/impl/UserProfileData.hbm.xml</value>
          <value>hmb/ConfigurationData.hbm.xml</value>
          <value>hmb/ResourceBundleDescription.hbm.xml</value>
          <value>hmb/ResourceBundleData.hbm.xml</value>
        </values-param>
      </init-params>
    </component-plugin>
  </external-component-plugins>
</configuration>